<!DOCTYPE html>
<html lang="en-LU" data-market="lu-en" data-country="lu" data-lang="en" data-currency="EUR">
<head>
  <title></title>
</head>
<style type="text/css">
  button {
    padding: 20px;
    margin: 50px;
  }
</style>

<script type="text/javascript">
  function openWidget(source) {
    console.log(source);
    setVisitorInfo(source);
    window.Netomi.chat.showWidget();
    window.Netomi.chat.openWidget();
  }
</script>
<script type="text/javascript">

var botRefId = "2be59370-0ce8-4fd7-8f6f-b1e6de2ea32d";

(function() {
    var ns = document.createElement("script");
    ns.src = "https://chatapps-qa-a.netomi.com/app/script.js";
    ns.type = "text/javascript";
    ns.async = true;
    ns.setAttribute('enableEventQueue', 'true');
    ns.setAttribute("botRefId", botRefId);
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ns, s);
    ns.onload = function() {
        Netomi.chat.onLoad(() => {
            window.Netomi.chat.hideWidget();
            console.log('chat widget loaded');
        });
        window.NETOMI_WEB_WIDGET.init(() => {
            console.log('init')
            setVisitorInfo();
        });
    };
})();

function setVisitorInfo(button_source) {
    console.log('button_source ',button_source);
    
    window.NETOMI_WEB_WIDGET.publish('VISITOR_INFO', {
        CURRENT_TIME: new Date().toLocaleTimeString(),
        BUTTON_SOURCE: button_source
    });
}
</script>
<body>


  <button onclick="openWidget('start_chat')">Start Chat</button>
  <button onclick="openWidget('call_us')">Call Us</button>

</body>
</html>